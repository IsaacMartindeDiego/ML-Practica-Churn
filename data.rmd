# Data Understanding

##Telecom Customer Churn Data Description

***Customers who left within the last month***

  * Churn (Whether the customer churned or not (Yes or No))
  
***Services that each customer has signed up for***

  * Phone: Whether the customer has a phone service or not (Yes, No)
  * Multiple lines: Whether the customer has multiple lines or not (Yes, No, No phone service)
  * Internet service: Customer's internet service provider (DSL, Fiber optic, No)
  * Online security: Whether the customer has online security or not (Yes, No, No internet service)
  * Online backup:Whether the customer has online backup or not (Yes, No, No internet service)
  * Device protection: Whether the customer has device protection or not (Yes, No, No internet service)
  * Tech support: Whether the customer has tech support or not (Yes, No, No internet service)
  * Streaming TV: Whether the customer has streaming TV or not (Yes, No, No internet service)
  * Streaming movies:Whether the customer has streaming movies or not (Yes, No, No internet service)
  
***Customer account information***

  * Tenure: Number of months the customer has stayed with the company
  * Contract: The contract term of the customer (Month-to-month, One year, Two year)
  * Payment method: The customer's payment method (Electronic check, Mailed check, Bank transfer (automatic), Credit card (automatic))
  * Paperless billing: Whether the customer has paperless billing or not (Yes, No)
  * Monthly charges: The amount charged to the customer monthly
  * Total charges: The total amount charged to the customer

***Demographic info about customers***

  * Gender: Customer gender (female, male)
  * SeniorCitizen: Whether the customer is a senior citizen or not (1, 0)
  * Partner: Whether the customer has a partner or not (Yes, No)
  * Dependents: Whether the customer has dependents or not (Yes, No)

##Packages Imported
```{r packages, echo=TRUE, warning=FALSE, message=FALSE}
library(e1071)
library(ggplot2)
library(bookdown)
library(dbplyr)
library(tidyr)
library(tidyverse)
library(MASS)
library(car)
library(caret)
library(cowplot)
library(caTools)
library(pROC)
library(ggcorrplot)
library(stringr)
library(dplyr)
library(fastDummies)
library(ROCR)
library(class)
library(rpart)
library(rattle)
library(rpart.plot)
library(randomForest)
#library(fastAdaboost)
library(adabag)
library(nnet)
```

##Import and Knowledge of the Data
```{r dataknowledge, echo=TRUE, warning=FALSE}
# Read the data 
Telco.Customer.Churn <- read.csv("./Telco-Customer-Churn.csv")
#Show dimensions 
dim(Telco.Customer.Churn)
#Show examples of the data
head(Telco.Customer.Churn)
#Show a summary of the data
summary(Telco.Customer.Churn)
```

## Clean of the data
After reviewing the summary there are 11 observations with some variables incomplete ("NA's") that are going to be removed for the analysis. The new dimensions are the following:
```{r cleandata, echo=TRUE, warning=FALSE}
# Copy in a new object all the complete observations. There are 11 observations that are incomplete and are removed from the data to study
# Old dimension: 7043 21. New dimension: 7432 21
telco<-data.frame(Telco.Customer.Churn[complete.cases(Telco.Customer.Churn),])
dim(Telco.Customer.Churn)
dim(telco)
```
 
##Clasify in Training, Test & Validation
For this analysis we will divide the global sample in three subsets for: **training**, **test** and **validation**. In this case, 50% is chosen for training, and 25% for testing and validation, respectively.

```{r samplingdata, echo=TRUE, warning=FALSE}
# Seed for reproductibility 
set.seed(1234214)

n_total= dim(telco)[1]
n_train = n_total * .5
n_test = n_total *.25

indices_totales = seq(1:n_total)
indices_train = sample(indices_totales, n_train)
indices_test = sample(indices_totales[-indices_train],n_test)

telco_train = telco[indices_train,]
telco_test = telco[indices_test,]
telco_validation = telco[-c(indices_test,indices_train),]
```
